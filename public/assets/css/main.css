:root {
  --bg: #1c1c1c; /* requested uniform background */
  --bg-alt: #1c1c1c;
  --surface: #333;
  --border: #3b3b3b;
  --text: #f2f2f2;
  --text-dim: #b5b5b5;
  --accent: #4aa3ff;
  --radius-sm: 4px;
  --radius-md: 10px;
  --transition: 140ms cubic-bezier(.4,.0,.2,1);

  /* Unified type scale (modify here to globally resize) */
  --fs-xs: 0.70rem;   /* micro labels, metadata */
  --fs-sm: 0.8rem;   /* controls, chips */
  --fs-base: 0.9rem; /* general UI text */
  --fs-md: 1.0rem;   /* subsection titles */
  --fs-lg: 1.2rem;    /* primary section headings */
  --fs-xl: 1.5rem;    /* app title */
}

[data-theme="light"] {
  --bg: #f8f9fa;
  --bg-alt: #ffffff;
  --surface: #ffffff;
  --border: #dee2e6;
  --text: #212529;
  --text-dim: #555;
  --accent: #0d6efd;
}

html, body, #app { height: 100%; }
body { background: var(--bg); color: var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; font-size: var(--fs-base); line-height:1.35; }

/* Headings */
h1 { font-size: var(--fs-xl); font-weight:600; }
h2 { font-size: var(--fs-lg); font-weight:600; }
h3 { font-size: var(--fs-md); font-weight:600; }

.app-shell { width: 100%; }
.app-sidebar { width: 280px; background: var(--surface); overflow-y: auto; border:none; }
.app-sidebar h1 { letter-spacing: .5px; }
.app-header { backdrop-filter: blur(8px); background: rgba(20,20,20,.75); }
[data-theme="light"] .app-header { background: rgba(255,255,255,.85); }

#gridContainer { background: var(--bg); }
.virtual-grid { position: relative; padding: 1rem; }
.vg-item { will-change: transform; }

.asset-card { position:relative; background:transparent; border:none; padding:4px; display:block; cursor:pointer; }
.asset-card:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
.asset-thumb-wrapper { aspect-ratio:1/1; background:#1c1c1c; position:relative; border-radius:10px; overflow:hidden; }
.asset-thumb-wrapper img { width:102%; height:102%; object-fit:contain; display:block; background:#1c1c1c; position:absolute; top:-1%; left:-1%; }
/* Hover name bar */
.asset-thumb-wrapper .thumb-name-bar { position:absolute; left:0; right:0; bottom:0; background:linear-gradient(180deg,rgba(0,0,0,0), rgba(0,0,0,.55)); color:#f2f2f2; font-size:var(--fs-xs); padding:.4rem .55rem .5rem; line-height:1.2; font-weight:500; letter-spacing:.35px; opacity:0; transform:translateY(6px); transition:opacity var(--transition), transform var(--transition); pointer-events:none; text-align:left; text-shadow:0 1px 2px rgba(0,0,0,.8); }
.asset-card:hover .thumb-name-bar, .asset-card:focus-visible .thumb-name-bar { opacity:1; transform:translateY(0); }
/* Full preview button (thumbnail hover) */
.asset-thumb-wrapper .thumb-full-btn { position:absolute; top:.45rem; right:.45rem; width:34px; height:34px; background:rgba(20,20,20,.55); backdrop-filter:blur(6px); border:1px solid rgba(255,255,255,.12); color:#eee; border-radius:8px; display:flex; align-items:center; justify-content:center; cursor:pointer; opacity:0; transform:translateY(-4px); transition:opacity var(--transition), transform var(--transition), background var(--transition), border-color var(--transition); }
.asset-thumb-wrapper .thumb-full-btn:hover { background:rgba(35,35,35,.75); border-color:rgba(255,255,255,.25); }
.asset-thumb-wrapper .thumb-full-btn:active { transform:translateY(-2px); }
.asset-card:hover .thumb-full-btn, .asset-card:focus-visible .thumb-full-btn { opacity:1; transform:translateY(0); }
[data-theme="light"] .asset-thumb-wrapper .thumb-full-btn { background:rgba(255,255,255,.7); color:#222; border-color:rgba(0,0,0,.15); }
[data-theme="light"] .asset-thumb-wrapper .thumb-full-btn:hover { background:rgba(255,255,255,.9); }
/* Hover / keyboard focus outline without shadow */
.asset-card:hover .asset-thumb-wrapper, .asset-card:focus-visible .asset-thumb-wrapper { outline:2px solid var(--accent); outline-offset:0; box-shadow:none; }
/* Thumbnail size buttons */
.ts-btn { background:#3a3a3a; color:#d0d0d0; font-size:var(--fs-sm); font-weight:600; letter-spacing:.5px; padding:.55rem 1rem .6rem; border:1px solid #4a4a4a; cursor:pointer; transition:background var(--transition), color var(--transition); }
.ts-btn + .ts-btn { border-left:none; }
.ts-btn:first-child { border-top-left-radius:6px; border-bottom-left-radius:6px; }
.ts-btn:last-child { border-top-right-radius:6px; border-bottom-right-radius:6px; }
.ts-btn:hover { background:#454545; }
.ts-btn.active { background:var(--accent); color:#111; border-color:var(--accent); }

/* Accessible focus style for size buttons */
.ts-btn:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
/* Remove name & tags display under thumbnails in new design */
.asset-name, .asset-tags { display:none !important; }

.skeleton { background: linear-gradient(90deg,#303030,#383838,#303030); background-size:200% 100%; animation: shimmer 1.1s ease-in-out infinite; }
@keyframes shimmer { 0% { background-position: 0 0; } 100% { background-position: -200% 0; } }

.detail-drawer { position: fixed; top:0; right:-520px; width:520px; height:100%;
  background: linear-gradient(180deg,#202020,#191919 60%,#161616); /* neutral greys */
  backdrop-filter: blur(22px) saturate(150%);
  border-left:1px solid #2d2d2d;
  transition: right var(--transition), box-shadow var(--transition);
  z-index:100; display:flex; flex-direction:column;
  box-shadow:-6px 0 28px -4px rgba(0,0,0,.65), 0 0 0 1px rgba(255,255,255,.02) inset;
  color: var(--text);
}
.detail-drawer.open { right:0; }
.detail-body h3 { font-size: var(--fs-md); margin-top:1rem; }
/* Detail panel modern layout */
.detail-drawer .preview-shell { position:relative; background:#151515; border:1px solid #2a2a2a; border-radius:14px; overflow:hidden; aspect-ratio:16/11; display:flex; align-items:center; justify-content:center; margin-bottom:1rem; transition:aspect-ratio var(--transition); }
.detail-drawer .preview-shell.square { aspect-ratio:1/1; }
.detail-drawer .preview-shell img { width:100%; height:100%; object-fit:contain; image-rendering:auto; }
.detail-drawer .preview-shell .preview-expand-btn { position:absolute; top:.55rem; right:.55rem; background:rgba(20,20,20,.55); backdrop-filter:blur(6px); border:1px solid rgba(255,255,255,.12); color:#eee; width:34px; height:34px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; cursor:pointer; padding:0; transition:background var(--transition), border-color var(--transition), color var(--transition); }
.detail-drawer .preview-shell .preview-expand-btn:hover { background:rgba(35,35,35,.75); border-color:rgba(255,255,255,.25); }
.detail-drawer .preview-shell .preview-expand-btn:active { transform:translateY(1px); }
.detail-drawer .preview-shell .preview-expand-btn svg { pointer-events:none; }
[data-theme="light"] .detail-drawer .preview-shell .preview-expand-btn { background:rgba(255,255,255,.7); color:#222; border-color:rgba(0,0,0,.15); }
[data-theme="light"] .detail-drawer .preview-shell .preview-expand-btn:hover { background:rgba(255,255,255,.9); }
.detail-drawer .meta-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:.75rem; margin:1rem 0 0; }
.detail-drawer .meta-tile { background:#232323; border:1px solid #303030; border-radius:10px; padding:.6rem .75rem .65rem; }
.detail-drawer .meta-label { font-size:var(--fs-xs); letter-spacing:.6px; text-transform:uppercase; color:#9ca3af; display:block; margin-bottom:.25rem; }
.detail-drawer .text-muted { color:#9ca3af !important; }
/* Slightly brighter meta labels for readability on dark bg */
.detail-drawer .meta-label { color:#b0b6bf; }
.detail-drawer code { color:#e8e8e8; }
[data-theme="light"] .detail-drawer .text-muted { color:#555 !important; }
[data-theme="light"] .detail-drawer .meta-label { color:#555; }
.detail-drawer .meta-value { font-size:var(--fs-sm); font-weight:500; color:#e5e7eb; word-break:break-all; }
.detail-drawer .tag { background:#2d2d2d; border:1px solid #3a3a3a; color:#e0e0e0; padding:.25rem .55rem; font-size:var(--fs-xs); letter-spacing:.4px; border-radius:20px; display:inline-flex; gap:.35rem; align-items:center; }
.detail-drawer .tags-wrap .tag { cursor:pointer; transition:background var(--transition), border-color var(--transition); }
.detail-drawer .tags-wrap .tag:hover { background:#3a3a3a; border-color:#4a4a4a; }
.detail-drawer .tags-wrap { display:flex; flex-wrap:wrap; gap:.4rem; margin:.2rem 0 0; }
.detail-drawer .actions-bar { display:flex; flex-wrap:wrap; gap:.5rem; margin-top:1.1rem; }
.detail-drawer .actions-bar .btn { font-size:var(--fs-xs); letter-spacing:.5px; }
.detail-drawer code { background:#2a2a2a; border:1px solid #343434; padding:2px 6px; border-radius:6px; font-size:var(--fs-xs); }
.detail-drawer .divider { height:1px; background:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.08),rgba(255,255,255,0)); margin:1rem 0; }
.detail-drawer .version-select { position:relative; }
.detail-drawer .version-select select { appearance:none; -webkit-appearance:none; font-size:var(--fs-sm); font-weight:500; padding:.45rem .9rem .45rem .7rem; width:100%; border-radius:8px; background:#1f1f1f; border:1px solid #2e2e2e; color:#e5e5e5; cursor:pointer; letter-spacing:.5px; }
.detail-drawer .version-select select:focus { outline:2px solid var(--accent); outline-offset:2px; }
.detail-drawer .version-select:after { content:'\25BE'; position:absolute; right:.55rem; top:50%; transform:translateY(-50%); pointer-events:none; font-size:.75rem; color:#c0c0c0; }
[data-theme="light"] .detail-drawer .version-select select { background:#ffffff; border-color:#d0d0d0; color:#222; }
[data-theme="light"] .detail-drawer .version-select:after { color:#555; }

/* Full preview overlay */
.preview-overlay { position:fixed; inset:0; background:rgba(0,0,0,.82); backdrop-filter:blur(6px); display:flex; align-items:center; justify-content:center; z-index:1400; animation: fadeIn .18s ease; }
.preview-modal { background:#161616; border:1px solid #2a2a2a; border-radius:14px; max-width:96vw; max-height:94vh; width:auto; padding:1rem 1.1rem 1.2rem; box-shadow:0 20px 48px -10px rgba(0,0,0,.75); display:flex; flex-direction:column; gap:.75rem; }
.preview-modal header { display:flex; justify-content:space-between; align-items:center; gap:1rem; }
.preview-modal h4 { margin:0; font-size:var(--fs-base); font-weight:600; letter-spacing:.5px; }
.preview-modal img { max-width:92vw; max-height:82vh; object-fit:contain; border-radius:10px; background:#111; }
.preview-meta { font-size:var(--fs-xs); color:#b5b5b5; letter-spacing:.4px; }
.preview-close { background:#262626; color:#eee; border:1px solid #343434; padding:.45rem .8rem; font-size:var(--fs-sm); border-radius:8px; cursor:pointer; }
.preview-close:hover { background:#2f2f2f; }
.preview-loading { color:#ccc; font-size:var(--fs-sm); padding:2rem 3rem; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
[data-theme="light"] .preview-modal { background:#fafafa; border-color:#dcdcdc; }
[data-theme="light"] .preview-close { background:#e6e6e6; color:#222; border-color:#d0d0d0; }
[data-theme="light"] .preview-close:hover { background:#ddd; }
[data-theme="light"] .detail-drawer { background:linear-gradient(180deg,#fafafa,#f0f0f0); border-left:1px solid #ddd; color:#222; }
[data-theme="light"] .detail-drawer .preview-shell { background:#fff; border-color:#e1e1e1; }
[data-theme="light"] .detail-drawer .meta-tile { background:#f5f5f5; border-color:#e1e1e1; }
[data-theme="light"] .detail-drawer .tag { background:#efefef; border-color:#e0e0e0; color:#222; }
[data-theme="light"] .detail-drawer code { background:#ececec; border-color:#e0e0e0; }

/* Sticky actions header inside drawer body */
.detail-body .sticky-actions { position:sticky; top:0; z-index:5; display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.4rem .4rem .55rem; margin:-.25rem -0.25rem .35rem; background:linear-gradient(180deg,rgba(32,32,32,.95),rgba(32,32,32,.8)); backdrop-filter: blur(12px) saturate(140%); border:1px solid #2a2a2a; border-radius:12px; }
.detail-body .sticky-actions .sa-title { font-size:var(--fs-md); font-weight:600; margin:0; max-width:220px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.detail-body .sticky-actions .sa-buttons { display:flex; gap:.4rem; flex-wrap:wrap; }
.detail-body .sticky-actions .btn { font-size:var(--fs-xs); padding:.35rem .65rem .4rem; }

/* Materials list modern styling */
.materials-list { display:flex; flex-direction:column; gap:.4rem; margin-top:.4rem; }
.materials-list .mat-row { display:grid; grid-template-columns: 1fr auto auto; align-items:center; gap:.5rem; background:#222; border:1px solid #2e2e2e; padding:.45rem .6rem; border-radius:8px; font-size:var(--fs-sm); }
.materials-list .mat-name { font-weight:500; letter-spacing:.3px; }
.materials-list .badge { font-size: var(--fs-xs); font-weight:600; padding:.25rem .5rem; border-radius:14px; letter-spacing:.5px; }
.materials-list .badge.bg-secondary { background:#444 !important; color:#eee; }
.materials-list .badge.bg-info { background:var(--accent) !important; color:#111; }
.materials-list .mat-row .btn { font-size:var(--fs-xs); padding:.3rem .55rem .35rem; }
.materials-list .mat-row:hover { background:#272727; border-color:#3a3a3a; }
@media (max-width: 520px) { .detail-body .sticky-actions { flex-direction:column; align-items:flex-start; } }

/* ID copy button styling */
/* ID pill near title */
.title-row { display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }
.id-pill { background:var(--accent); color:#111; border:none; font-size:var(--fs-xs); font-weight:600; letter-spacing:.6px; padding:.35rem .6rem .4rem; border-radius:20px; cursor:pointer; position:relative; box-shadow:0 0 0 1px rgba(255,255,255,.08),0 2px 6px -2px rgba(0,0,0,.6); }
.id-pill:hover { filter:brightness(1.05); }
.id-pill:active { transform:translateY(1px); }
.id-pill.copied { background:#35d07f; color:#092b18; }
.id-pill:hover::after { content:attr(title); position:absolute; left:50%; transform:translate(-50%, -110%); top:0; background:#111; color:#eee; padding:.35rem .55rem; border:1px solid #333; font-size:var(--fs-xs); border-radius:6px; white-space:nowrap; z-index:15; }

/* Settings Panel */
.settings-panel { position: fixed; inset:0; background: rgba(0,0,0,.55); backdrop-filter: blur(4px); display:flex; align-items:flex-start; justify-content:center; padding:4rem 1rem 2rem; z-index:200; }
.settings-panel.hidden { display:none; }
.settings-dialog { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius-md); padding:1rem 1.25rem 1.25rem; width:100%; max-width:520px; box-shadow:0 10px 32px -8px rgba(0,0,0,.6); }
/* Settings dialog typography overrides for better readability */
.settings-dialog .form-label { font-size: var(--fs-sm); letter-spacing:.3px; }
.settings-dialog input[type=text] { font-size: var(--fs-base); height:2.3rem; }
.settings-dialog .form-text { font-size: var(--fs-sm); color: var(--text-dim); line-height:1.4; margin-top:.35rem; }
.settings-dialog .btn, .settings-dialog .btn-sm { font-size: var(--fs-sm); }

.hidden { display: none !important; }

@media (max-width: 900px) { .app-sidebar { position: fixed; left:-300px; top:0; bottom:0; z-index:110; transition: left var(--transition); } .app-sidebar.open { left:0; } }

/* Quick filter chips */
.qf-chip { font-size:var(--fs-sm); letter-spacing:.4px; text-transform:uppercase; background:#3a3a3a; color:#e0e0e0; padding:.45rem .8rem .5rem; border:1px solid #4a4a4a; border-right:none; display:inline-flex; align-items:center; cursor:pointer; }
.qf-chip:first-child { border-top-left-radius:6px; border-bottom-left-radius:6px; }
.qf-chip:last-child { border-right:1px solid #4a4a4a; border-top-right-radius:6px; border-bottom-right-radius:6px; }
.qf-chip:hover { background:#444; }
.qf-chip.active { background:var(--accent); color:#111; border-color:var(--accent); }

/* Sidebar form control adjustments for readability */
.app-sidebar input[type=text], .app-sidebar select { font-size:var(--fs-sm); background:#3a3a3a; border:none; color:#fff; box-shadow:0 0 0 1px #4a4a4a inset; height:2.1rem; }
.app-sidebar select { padding-left:.4rem; }
.app-sidebar input[type=text]:focus, .app-sidebar select:focus { outline:2px solid var(--accent); box-shadow:none; }

label, .form-label { font-size:var(--fs-xs); letter-spacing:.5px; }
#statusBar { font-size:var(--fs-xs); }

/* Smaller checkboxes */
.app-sidebar .form-check-input { width:1.3rem; height:1.3rem; margin-top:.15rem; }
.app-sidebar .form-check-label { font-size:var(--fs-xs); margin-left: 0.5rem;line-height:1.15; }

/* Remove drawer border */
.detail-drawer { border-left:none !important; }

/* Scrollbar subtle styling */
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,.08); border-radius:20px; border:2px solid transparent; background-clip:padding-box; }
::-webkit-scrollbar-thumb:hover { background:rgba(255,255,255,.15); border:2px solid transparent; }
